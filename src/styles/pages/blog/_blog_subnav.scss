@include animFadeIn;

$subnavHeight: 62px;

.blog_subnav {
	height: #{$subnavHeight + 8px};
	padding-top: 8px !important;
	z-index: 100;

	.anim-fadein {
		animation: 0.6s ease-out 0s 1 normal forwards running fadeIn;
	}

	.search_text_input_wrapper {
		font-size: 14px;

		&:before {
			background-image: url("../../img/icons/search.svg");
			background-position: center;
			background-repeat: no-repeat;
			background-size: contain;
			content: "";
			filter: saturate(0);
			height: 1.4em;
			left: 0.8em;
			margin-bottom: 4px;
			opacity: 0.3;
			position: absolute;
			width: 1.4em;
			z-index: 10;
		}
	}

	.search_text {
		background: #ececec none;
		border: none;
		border-radius: 100px;
		color: $ash;
		font-size: 14px;
		height: 2.2em;
		outline: 1px solid transparent;
		padding: 0.4em 0.8em;
		padding-left: 3em;
		transition: max-width 0.6s ease, color 0.3s;
		width: 100%;
		z-index: 1;

		&:placeholder-shown {
			color: #8e918f;
		}

		&:focus,
		&:active {
			max-width: 60em;
		}
	}

	.burger {
		appearance: none;
		background: #fff none;
		border: 0 none;
		cursor: pointer;
		display: block;
		height: 50px;
		max-width: 10vw;
		position: relative;
		transition: -webkit-transform 0.6s;
		transition: transform 0.6s;
		width: 26px;

		.line {
			background-color: $ash;
			border-radius: 4px;
			height: 2px;
			left: 10%;
			position: absolute;
			top: 50%;
			-webkit-transform: translateY(-50%);
			transform: translateY(-50%);
			transition: background-color 0.6s, opacity 0.6s, width 0.6s, transform 0.6s;
			width: 18px;

			&:nth-child(1) {
				transform: translateY(-300%);
			}

			&:nth-child(2) {
				transition: transform 0.6s, opacity 0.6s, width 0.6s, -webkit-transform 0.6s;
			}

			&:nth-child(3) {
				transform: translateY(200%);
			}
		}

		&:hover {
			.line {
				background-color: $cerulean;
			}
		}

		&.active {
			.line {
				&:nth-child(1) {
					transform: translateY(-50%) rotate(225deg);
				}

				&:nth-child(2) {
					opacity: 0;
				}

				&:nth-child(3) {
					transform: translateY(-50%) rotate(-225deg);
				}
			}
		}
	}
}

html[lang="de"] {
	.blog_subnav .subnav_item a {
		white-space: normal !important;
	}
}

@media (max-width: $xsMax) {
}

@media (min-width: $sm) and (max-width: $smMax) {
}

@media (max-width: $smMax) {
	.blog_subnav {
		nav {
			background-color: #fff;
			border-radius: 10px;
			box-shadow: 4px 4px 16px rgba(#000, 0);
			font-size: 14px;
			left: 0;
			line-height: 140%;
			max-height: 0vh;
			overflow: hidden;
			padding: 0px 8px;
			pointer-events: none;
			position: absolute;
			top: 100%;
			transition: max-height 0.6s ease, padding 0.6s ease, box-shadow 0.6s ease;
			width: calc(100vw - 32px);

			&.active {
				box-shadow: 4px 4px 16px rgba(#000, 0.4);
				max-height: 60vh;
				overflow-y: auto;
				padding: 16px 8px;
				pointer-events: all;
			}
		}

		a[class*="level_"] {
			color: $ash;

			&:hover,
			&:focus,
			&:active {
				background-color: $zircon;
				color: $reflex;
			}
		}

		[class*="level_"]:not(a) {
			color: $ash;
			cursor: default;
		}

		.level_1 {
			font-weight: bold;
			padding: 8px 16px;
		}

		.level_2 {
			margin-left: 16px;
			padding: 6px 16px;
		}
	}
}

@media (min-width: $md) {
	.blog_subnav {
		font-size: calc(min(1.4vw, 14px));
		line-height: 120%;

		&:after {
			background: linear-gradient(to bottom, rgba(#000, 0.1) 0%, rgba(#000, 0) 100%);
			bottom: 0;
			content: "";
			height: 1rem;
			left: 50%;
			opacity: 1;
			pointer-events: none;
			position: absolute;
			transform: translate(-50%, 100%);
			transition: opacity 0.2s;
			width: 100vw;
			z-index: 1;
		}

		a {
			border-radius: 6px;
			display: inline-block;
			font-size: 14px;
			font-weight: 500;
			white-space: nowrap;

			&:hover {
				font-weight: 700;
			}
		}

		.subnav_item {
			align-items: center;
			color: $ash;
			display: flex;
			flex: 0 1 20%;
			font-size: 1em;
			height: $subnavHeight;
			margin-right: 2em;
			max-width: 22%;

			.label {
				align-items: center;
				cursor: default;
				display: flex;
				height: 100%;
				padding-bottom: 8px;
				width: 100%;
			}

			a {
				align-items: center;
				color: $ash;
				cursor: pointer;
				display: inline-flex;
				height: 100%;
				white-space: normal;

				&:hover {
					color: $ash;
				}
			}

			&:hover {
				.label,
				.label a {
					font-weight: 700;
				}

				.subsub {
					box-shadow: 4px 4px 8px rgba(#000, 0.1);
					max-height: 500px;
					padding-bottom: 1.1em;
					padding-top: 1.1em;
				}

				&:after {
					width: 100%;
				}

				&.has_children {
					&:before {
						transform: translateY(-50%) rotate(180deg);
					}
				}
			}

			&:after {
				background: linear-gradient(to right, #19cdff 15%, #1e1bb2 45%, #ff1919 90%);
				bottom: 8px;
				content: "";
				display: block;
				height: 2px;
				left: 50%;
				position: absolute;
				-webkit-transform: translateX(-50%);
				transform: translateX(-50%);
				transition: width 0.2s ease-out;
				width: 0%;
			}

			&.has_children {
				.label {
					padding-right: 18px;
				}

				&:before {
					background-image: url("../../img/controls/chevron_down_ash.svg");
					background-position: center center;
					background-repeat: no-repeat;
					background-size: contain;
					content: "";
					height: 12px;
					position: absolute;
					right: 0;
					top: calc(50% - 5px);
					transform: translateY(-50%);
					transform-origin: center center;
					transition: transform 0.3s;
					width: 12px;
				}
			}
		}

		.subsub {
			background: #fff;
			border-radius: 0 0 12px 12px;
			box-shadow: 4px 4px 8px rgba(#000, 0);
			left: 0;
			list-style-type: none;
			max-height: 0px;
			max-width: none;
			overflow: hidden;
			padding: 0px 1.2em 0 1em;
			position: absolute;
			top: calc(100% - 8px);
			transition: max-height 0.15s ease, padding 0.15s ease, box-shadow 0.15s ease;
			width: auto;
			z-index: 10;

			a {
				background: #fff;
				border-radius: 6px;
				color: $ash;
				display: inline-block;
				font-weight: 500;
				padding: 0.8em 1.3em 0.7em 1.1em;
				white-space: nowrap;

				&:hover {
					background-color: $zircon;
					color: $ash;
					font-weight: 700;
				}
			}
		}
	}
}

@-moz-document url-prefix() {
	.blog_subnav {
		.subnav_item:hover .label,
		.subnav_item:hover .label a,
		a:hover {
			letter-spacing: -0.5px;
		}
	}
}
